<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Trips | Gujarat Transportation</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <meta
      name="description"
      content="Book buses and truck cargo transport with Gujarat Transportation. Safe, fast & affordable service across Ahmedabad, Surat, Vadodara, Rajkot and all major metro cities in India."
    />
    <link rel="canonical" href="https://gujarattransportation.in/" />

    <!-- Indexing -->
    <meta
      name="robots"
      content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:-1"
    />
    <meta
      name="googlebot"
      content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:-1"
    />
    <meta name="bingbot" content="index,follow" />

    <!-- Charset / Viewport -->
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="format-detection" content="telephone=no" />

    <!-- Language / Region -->
    <meta name="language" content="en" />
    <meta http-equiv="content-language" content="en-IN" />
    <meta name="geo.region" content="IN-GJ" />
    <meta name="geo.placename" content="Gujarat, India" />
    <meta name="theme-color" content="#0f172a" />
    <meta name="color-scheme" content="light" />

    <!-- Brand -->
    <meta name="application-name" content="Gujarat Transportation" />
    <meta name="author" content="Gujarat Transportation" />
    <meta name="publisher" content="Gujarat Transportation" />
    <meta name="copyright" content="¬© 2026 Gujarat Transportation" />
    <meta name="rating" content="general" />
    <meta name="distribution" content="global" />

    <!-- Open Graph (Facebook/WhatsApp) -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Gujarat Transportation" />
    <meta
      property="og:title"
      content="Bus Booking & Truck Cargo Transport | Gujarat Transportation"
    />
    <meta
      property="og:description"
      content="Book buses and truck cargo transport with live support, transparent pricing and metro-city coverage across India."
    />
    <meta property="og:url" content="https://gujarattransportation.in/" />
    <meta
      property="og:image"
      content="https://gujarattransportation.in/static/img/og-cover.jpg"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:locale" content="en_IN" />

    <!-- Twitter/X -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Gujarat Transportation | Bus + Truck Transport"
    />
    <meta
      name="twitter:description"
      content="Bus booking & truck cargo transport across India with Gujarat Transportation."
    />
    <meta
      name="twitter:image"
      content="https://gujarattransportation.in/static/img/og-cover.jpg"
    />

    <!-- iOS / Android PWA -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="Gujarat Transport" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <link rel="apple-touch-icon" href="/static/img/apple-touch-icon.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/static/img/favicon-32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/static/img/favicon-16.png"
    />
    <link rel="manifest" href="/static/manifest.webmanifest" />

    <!-- Performance / SEO extras -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <meta name="referrer" content="strict-origin-when-cross-origin" />

    <!-- Optional (not a ranking factor, but OK) -->
    <meta
      name="keywords"
      content="Gujarat transportation, bus booking Gujarat, truck transport Gujarat, cargo transport Ahmedabad, logistics Gujarat, transport service India, bus booking India, truck booking India"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='main.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='profile.css') }}"
    />
  </head>

  <body class="bg-slate-50 font-sans">
    <!-- NavBar Kinks Section -->
    <header class="navbar">
      <div class="navbar-container">
        <!-- Logo -->
        <a href="/index.html">
          <img
            src="{{ url_for('static', filename='img/logo-gujrat.png') }}"
            alt="Logo"
            class="logo"
          />
        </a>

        <!-- Mobile Menu Toggle (Android & iPhone only) -->
        <button class="menu-toggle" id="menuToggle">‚ò∞</button>

        <!-- Desktop Navigation -->
        <nav class="desktop-navigation">
          <a href="/" class="drawer-link">Home</a>
          <a href="/service" class="drawer-link">Services</a>
          <a href="/gallery" class="drawer-link">Gallery</a>
          <a href="/booking" class="drawer-link">Book</a>
          <a href="/about" class="drawer-link">About Us</a>
          <a href="/contact" class="drawer-link">Contact</a>
          <a href="/booking" class="drawer-btn">Book Now</a>
          <!-- üîê ADMIN LOGIN (HIDDEN FOR USERS) -->
          <!-- ================= USER STATE & ACCOUNT SECTION ================= -->
          <section id="user-auth-state" class="auth-wrapper">
            {% if session.user %}
            <div class="account-box" id="accountBox">
              <button class="account-btn" id="accountBtn">
                {{ session.user.username }} ‚ñæ
              </button>

              <div class="account-dropdown" id="accountDropdown">
                <a href="/profile"
                  ><i class="fa-regular fa-user-circle"></i>My Profile</a
                >
                <a href="/mybookings"
                  ><i class="fa-solid fa-briefcase"></i>My Bookings</a
                >

                {% if user.role == "admin" %}
                <a href="/adminpanel"
                  ><i class="fa-solid fa-sliders"></i>Admin Panel</a
                >
                {% endif %}

                <a href="/logout" class="logout"
                  ><i class="fa-solid fa-right-from-bracket"></i>Logout</a
                >
              </div>
            </div>
            {% else %}
            <button
              class="login-btn-nav"
              id="openLoginModal"
              onclick="openLogin()"
            >
              Login / Sign Up
            </button>
            {% endif %}
          </section>
        </nav>
      </div>
    </header>

    <!-- Mobile Drawer Menu -->
    <div class="mobile-drawer" id="mobileDrawer">
      <button class="drawer-close" id="drawerClose">‚úï</button>

      <a href="/">Home</a>
      <a href="/service">Services</a>
      <a href="/gallery">Gallery</a>
      <a href="/booking">Book</a>
      <a href="/about">About Us</a>
      <a href="/contact">Contact</a>
      <a href="/booking" class="drawer-btn">Book Now</a>
    </div>

    <!-- Profile Section -->
    <div class="profile-container">
      <!-- LEFT SIDEBAR -->
      <div class="sidebar">
        <div class="user-box">
          <i class="fa-solid fa-user-circle"></i>
          <h3>{{ user.username }}</h3>
        </div>

        <a href="/mybookings" class="active">
          <i class="fa-solid fa-briefcase"></i> My Trips
        </a>

        <a href="/profile"> <i class="fa-solid fa-user"></i> My Profile </a>
      </div>

      <div class="profile-content">
        <h2>My Bookings</h2>

        <p>Welcome {{ user.username }}</p>

        <div class="bookings-table-wrap">
          <table class="bookings-table">
            <!-- ===== TABLE HEADER ===== -->
            <thead>
              <tr>
                <th>Type</th>
                <th>Route</th>
                <th>Journey Date</th>
                <th>Details</th>
                <th>Distance</th>
                <th>Amount</th>
                <th>Booked On</th>
              </tr>
            </thead>

            <!-- ===== TABLE BODY ===== -->
            <!-- ===== TABLE BODY ===== -->
            <tbody>
              {% for b in all_bookings %}
              <tr>
                <td>
                  {% if b.type == "bus" %}
                  <span class="tag tag-bus">üöå Bus</span>
                  {% else %}
                  <span class="tag tag-truck">üöö Truck</span>
                  {% endif %}
                </td>

                <td>
                  {% if b.type == "bus" %}
                  <b>{{ b.from }}</b> ‚Üí <b>{{ b.to }}</b>
                  {% else %}
                  <b>{{ b.pickup }}</b> ‚Üí <b>{{ b.delivery }}</b>
                  {% endif %}
                </td>

                <!-- ‚úÖ FIXED: Journey Date (Truck fallback to booking date) -->
                <td>
                  {% if b.type == "bus" %} {{ (b.get("journeyDate") or
                  b.get("journey_date") or b.get("date") or "‚Äî") }} {% else %}
                  {{ (b.get("pickup_date") or b.get("date") or "‚Äî") }} {% endif
                  %}
                </td>

                <td>
                  {% if b.type == "bus" %} {{ b.busType }} ‚Ä¢ {{ b.seaterType }}
                  {% else %} {{ b.service }} ‚Ä¢ {{ b.truck }} {% endif %}
                </td>

                <td>{{ (b.get("distance") or "‚Äî") }} km</td>
                <td>‚Çπ{{ (b.get("payment") or 0) }}</td>

                <!-- ‚úÖ FIXED: Booked On (never blank) -->
                <td>{{ (b.get("date") or b.get("created_at") or "‚Äî") }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <!-- Footer Section -->
    <footer class="footer-section">
      <div class="footer-container">
        <div class="footer-grid">
          <!-- Brand -->
          <div class="footer-brand">
            <h2 class="footer-logo">
              <img
                src="{{ url_for('static', filename='/img/footer-logo.png') }}"
                alt="Gujrat Transport Logo"
                class="footer-logo-img"
              />
            </h2>

            <p class="footer-text">
              Your trusted partner for comfortable bus travel and reliable truck
              transportation services across the nation.
            </p>

            <div class="social-icons">
              <a href="#"><span>üåê</span></a>
              <a href="#"><span>üê¶</span></a>
              <a href="#"><span>üì∏</span></a>
              <a href="#"><span>üíº</span></a>
            </div>
          </div>

          <!-- Quick Links -->
          <div class="footer-links">
            <h3>Quick Links</h3>
            <ul>
              <li><a href="/index">Home</a></li>
              <li><a href="/about">About Us</a></li>
              <li><a href="/gallery">Gallery</a></li>
              <li><a href="/service">Services</a></li>
              <li><a href="/booking">Book Now</a></li>
              <li><a href="/contact">Contact</a></li>
            </ul>
          </div>

          <!-- Services -->
          <div class="footer-services">
            <h3>Our Services</h3>
            <ul>
              <li><a href="/service">Sleeper Coach Bus</a></li>
              <li><a href="/service">A/C Sleeper Coach</a></li>
              <li><a href="/service">Heavy Truck Transport</a></li>
              <li><a href="/service">Container Services</a></li>
              <li><a href="/service">Express Delivery</a></li>
            </ul>
          </div>

          <!-- Contact -->
          <div class="footer-contact">
            <h3>Contact Us</h3>
            <ul>
              <li>
                <a href="https://maps.google.com" target="_blank">
                  üìç 05 Transport Hub, Highway Road, Ahmedabad, Gujarat 700007
                </a>
              </li>
              <li>
                <a href="tel:+918976645502"> üìû +91 897-664-5502 </a>
              </li>
              <li>
                <a href="mailto:official.karanparmar@gmail.com">
                  ‚úâÔ∏è official.karanparmar@gmail.com
                </a>
              </li>
            </ul>
          </div>
        </div>
        <hr class="footer-divider" />
        <div class="footer-bottom">
          <p>¬© 2025 Gujrat Transport. All rights reserved.</p>
        </div>
      </div>
    </footer>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <a
      href="https://wa.me/918976645502?text=Hi%20I%20want%20a%20booking%20service"
      class="whatsapp-float"
      target="_blank"
    >
      <i class="fab fa-whatsapp"></i>
      <span>WhatsApp</span>
    </a>
    <!-- üîπ LOGIN MODAL SCRIPT (ADDED) -->
    <script>
      const overlay = document.getElementById("loginOverlay");

      /* ===========================
       FIRST VISIT CHECK
    =========================== */
      document.addEventListener("DOMContentLoaded", () => {
        const firstVisit = localStorage.getItem("firstVisitDone");

        if (!firstVisit) {
          // Show modal on first visit
          overlay.style.display = "flex";
          document.body.classList.add("modal-open");

          // Mark as visited
          localStorage.setItem("firstVisitDone", "true");
        } else {
          // Hide on refresh / next visits
          overlay.style.display = "none";
          document.body.classList.remove("modal-open");
        }
      });

      function closeLogin() {
        overlay.style.display = "none";
        document.body.classList.remove("modal-open");
      }

      function openLogin() {
        overlay.style.display = "flex";
        document.body.classList.add("modal-open");
      }
    </script>

    <!-- Scripts -->
    <script>
      lucide.createIcons();

      // Menu Toggle Logic
      const menuToggle = document.getElementById("menuToggle");
      const closeMenu = document.getElementById("closeMenu");
      const navMenu = document.getElementById("navMenu");
      const menuOverlay = document.getElementById("menuOverlay");

      const openDrawer = () => {
        navMenu.classList.add("is-open");
        menuOverlay.classList.add("is-visible");
        document.body.style.overflow = "hidden"; // Prevent scrolling when open
      };

      const closeDrawer = () => {
        navMenu.classList.remove("is-open");
        menuOverlay.classList.remove("is-visible");
        document.body.style.overflow = ""; // Restore scrolling
      };

      menuToggle.addEventListener("click", openDrawer);
      closeMenu.addEventListener("click", closeDrawer);
      menuOverlay.addEventListener("click", closeDrawer);

      // Intersection Observer for animations
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("show");
              entry.target.classList.add("active");
            }
          });
        },
        { threshold: 0.2 },
      );

      document
        .querySelectorAll(".scroll-animate")
        .forEach((el) => observer.observe(el));
      document
        .querySelectorAll(".scroll-slide")
        .forEach((el) => observer.observe(el));
    </script>
    <script>
      const drawer = document.getElementById("mobileDrawer");
      const closeBtn = document.getElementById("drawerClose");

      menuToggle.addEventListener("click", () => {
        drawer.classList.add("active");
      });

      closeBtn.addEventListener("click", () => {
        drawer.classList.remove("active");
      });
    </script>

    <script>
      const overlay = document.getElementById("loginOverlay");

      /* ===========================
       FIRST VISIT CHECK
    =========================== */
      document.addEventListener("DOMContentLoaded", () => {
        const firstVisit = localStorage.getItem("firstVisitDone");

        if (!firstVisit) {
          // Show modal on first visit
          overlay.style.display = "flex";
          document.body.classList.add("modal-open");

          // Mark as visited
          localStorage.setItem("firstVisitDone", "true");
        } else {
          // Hide on refresh / next visits
          overlay.style.display = "none";
          document.body.classList.remove("modal-open");
        }
      });

      function closeLogin() {
        overlay.style.display = "none";
        document.body.classList.remove("modal-open");
      }

      function openLogin() {
        overlay.style.display = "flex";
        document.body.classList.add("modal-open");
      }
    </script>
    <script>
      const accountBtn = document.getElementById("accountBtn");
      const accountDropdown = document.getElementById("accountDropdown");

      if (accountBtn) {
        accountBtn.addEventListener("click", function (e) {
          e.stopPropagation();

          if (accountDropdown.style.display === "flex") {
            accountDropdown.style.display = "none";
          } else {
            accountDropdown.style.display = "flex";
          }
        });

        // Close dropdown when clicking outside
        document.addEventListener("click", function () {
          accountDropdown.style.display = "none";
        });
      }
    </script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@graph": [
          {
            "@type": "WebSite",
            "@id": "https://gujarattransportation.in/#website",
            "url": "https://gujarattransportation.in/",
            "name": "Gujarat Transportation",
            "potentialAction": {
              "@type": "SearchAction",
              "target": "https://gujarattransportation.in/search?q={search_term_string}",
              "query-input": "required name=search_term_string"
            }
          },
          {
            "@type": "Organization",
            "@id": "https://gujarattransportation.in/#org",
            "name": "Gujarat Transportation",
            "url": "https://gujarattransportation.in/",
            "logo": "https://gujarattransportation.in/static/img/logo-gujrat.png",
            "sameAs": [
              "https://www.facebook.com/yourpage",
              "https://www.instagram.com/yourpage",
              "https://www.linkedin.com/company/yourpage"
            ]
          },
          {
            "@type": "LocalBusiness",
            "@id": "https://gujarattransportation.in/#localbusiness",
            "name": "Gujarat Transportation",
            "image": "https://gujarattransportation.in/static/img/og-cover.jpg",
            "url": "https://gujarattransportation.in/",
            "telephone": "+91-8976645502",
            "priceRange": "‚Çπ‚Çπ",
            "address": {
              "@type": "PostalAddress",
              "streetAddress": "05 Transport Hub, Highway Road",
              "addressLocality": "Ahmedabad",
              "addressRegion": "Gujarat",
              "postalCode": "700007",
              "addressCountry": "IN"
            },
            "areaServed": [
              "Ahmedabad",
              "Surat",
              "Vadodara",
              "Rajkot",
              "Mumbai",
              "Delhi NCR",
              "Pune",
              "Bengaluru",
              "Hyderabad",
              "Chennai",
              "Kolkata"
            ],
            "makesOffer": [
              {
                "@type": "Offer",
                "name": "Bus Booking Service",
                "category": "Bus",
                "availability": "https://schema.org/InStock"
              },
              {
                "@type": "Offer",
                "name": "Truck / Cargo Transport Service",
                "category": "Truck",
                "availability": "https://schema.org/InStock"
              }
            ]
          },
          {
            "@type": "FAQPage",
            "@id": "https://gujarattransportation.in/#faq",
            "mainEntity": [
              {
                "@type": "Question",
                "name": "Do you provide bus booking in metro cities?",
                "acceptedAnswer": {
                  "@type": "Answer",
                  "text": "Yes. We provide bus booking across major metro cities and Gujarat routes. Contact support for group/corporate bookings."
                }
              },
              {
                "@type": "Question",
                "name": "Do you provide truck cargo transport across India?",
                "acceptedAnswer": {
                  "@type": "Answer",
                  "text": "Yes. We provide truck cargo transport for intercity delivery, shifting and business logistics across India."
                }
              }
            ]
          }
        ]
      }
    </script>
  </body>
</html>
